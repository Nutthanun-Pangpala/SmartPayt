‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à NPM ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå SmartPayt
‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà clone project‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡πá‡∏Ñ‡∏ß‡∏£ cd ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ó‡∏µ‡∏•‡∏∞‡∏ï‡∏±‡∏ß 
‡πÄ‡∏ä‡πà‡∏ô cd smartpayt-server ‡πÅ‡∏•‡∏∞ cd smartpayt-client ‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∂‡∏á npm install
npm install exceljs


üñ•Ô∏è ‡∏ù‡∏±‡πà‡∏á Server (smartpayt-server)
| Package         | Version | ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏                                 |
| --------------- | ------- | ---------------------------------------- |
| `@line/bot-sdk` | 9.9.0   | ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö LINE Bot API                   |
| `axios`         | 1.8.4   | ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏≥ HTTP request                    |
| `bcrypt`        | 5.1.1   | ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö hash ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (native)            |
| `bcryptjs`      | 2.4.3   | ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö hash ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (JS)                |
| `body-parser`   | 1.20.3  | ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö parse HTTP body                   |
| `bwip-js`       | 4.6.0   | ‡∏™‡∏£‡πâ‡∏≤‡∏á barcode                            |
| `cors`          | 2.8.5   | ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï cross-origin request              |
| `dotenv`        | 16.5.0  | ‡πÇ‡∏´‡∏•‡∏î config ‡∏à‡∏≤‡∏Å `.env`                   |
| `express`       | 4.21.2  | Web framework ‡∏´‡∏•‡∏±‡∏Å                       |
| `jsonwebtoken`  | 9.0.2   | ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö JWT auth                          |
| `morgan`        | 1.10.0  | Logger                                   |
| `multer`        | 2.0.1   | ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ multipart/form-data (‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå) |
| `mysql2`        | 3.14.0  | ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ MySQL (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö promise)         |
| `nodemon`       | 3.1.9   | Dev tool ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö restart server ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ |
| `querystring`   | 0.2.1   | ‡πÅ‡∏õ‡∏•‡∏á query string                        |


üíª ‡∏ù‡∏±‡πà‡∏á Client (smartpayt-client)


| Package                       | Version | ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏                                         |
| ----------------------------- | ------- | ------------------------------------------------ |
| `@eslint/js`                  | 9.25.1  | ESLint core                                      |
| `@flaticon/flaticon-uicons`   | 3.3.1   | ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô Flaticon                                   |
| `@line/liff`                  | 2.26.0  | ‡πÉ‡∏ä‡πâ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ LIFF SDK (LINE Front-end Framework) |
| `@types/react`                | 18.3.20 | Type definitions for React                       |
| `@types/react-dom`            | 18.3.6  | Type definitions for ReactDOM                    |
| `@vitejs/plugin-react`        | 4.4.1   | Plugin ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Vite ‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö React               |
| `autoprefixer`                | 10.4.21 | ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö PostCSS (‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö Tailwind)                 |
| `axios`                       | 1.8.4   | ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡πà‡∏á request                                |
| `buffer`                      | 6.0.3   | ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Buffer ‡πÉ‡∏ô‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå                      |
| `eslint`                      | 9.25.1  | ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÇ‡∏Ñ‡πâ‡∏î                            |
| `eslint-plugin-react`         | 7.37.5  | Plugin ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ESLint ‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö React             |
| `eslint-plugin-react-hooks`   | 5.2.0   | ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ React hooks                  |
| `eslint-plugin-react-refresh` | 0.4.20  | ‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö fast refresh ‡πÉ‡∏ô React dev                 |
| `express`                     | 4.21.2  | ‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô frontend ‚Äî ‡∏≠‡∏≤‡∏à‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏ú‡∏¥‡∏î         |
| `globals`                     | 15.15.0 | ‡πÉ‡∏ä‡πâ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö ESLint                                |
| `mysql2`                      | 3.14.0  | ‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô frontend ‚Äî ‡∏≠‡∏≤‡∏à‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏ú‡∏¥‡∏î         |
| `postcss`                     | 8.5.3   | ‡πÉ‡∏ä‡πâ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö Tailwind                              |
| `prop-types`                  | 15.8.1  | ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ä‡∏ô‡∏¥‡∏î props                                |
| `react`                       | 18.3.1  | React Core                                       |
| `react-dom`                   | 18.3.1  | React DOM                                        |
| `react-icons`                 | 5.5.0   | ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡πÉ‡∏ô React                                    |
| `react-router-dom`            | 6.30.0  | Routing                                          |
| `recharts`                    | 2.15.3  | ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ß‡∏≤‡∏î‡∏Å‡∏£‡∏≤‡∏ü/‡πÅ‡∏ú‡∏ô‡∏†‡∏π‡∏°‡∏¥                            |
| `tailwindcss`                 | 3.4.17  | CSS Framework                                    |
| `vite`                        | 5.4.18  | Dev server & build tool                          |



| Table               | Description               |
| ------------------- | ------------------------- |
| **`users`**         | ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (LINE)       |
| **`addresses`**     | ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ          |
| **`admins`**        | ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏£‡∏∞‡∏ö‡∏ö          |
| **`bills`**         | ‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà |
| **`payment_slips`** | ‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ   |
| **`waste_pricing`** | ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏¢‡∏∞‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó        |
| **`waste_records`** | ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡∏¢‡∏∞‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏ô |

CREATE TABLE users (
  lineUserId VARCHAR(255) PRIMARY KEY,
  name VARCHAR(100) NOT NULL,
  ID_card_No VARCHAR(20) NOT NULL,
  Phone_No VARCHAR(20) NOT NULL,
  Email VARCHAR(100),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  verify_status TINYINT DEFAULT 0,
  admin_verify INT
);

CREATE TABLE addresses (
  address_id INT AUTO_INCREMENT PRIMARY KEY,
  lineUserId VARCHAR(255),
  house_no VARCHAR(100),
  Alley VARCHAR(255),
  province VARCHAR(100) NOT NULL,
  district VARCHAR(100) NOT NULL,
  sub_district VARCHAR(100) NOT NULL,
  postal_code VARCHAR(10) NOT NULL,
  address_verified TINYINT DEFAULT 0,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  admin_verify INT,
  FOREIGN KEY (lineUserId) REFERENCES users(lineUserId) ON DELETE CASCADE
);

CREATE TABLE admins (
  id INT AUTO_INCREMENT PRIMARY KEY,
  admin_username VARCHAR(255) NOT NULL,
  admin_password VARCHAR(255) NOT NULL
);

CREATE TABLE bills (
  id INT AUTO_INCREMENT PRIMARY KEY,
  address_id INT NOT NULL,
  amount_due DECIMAL(10,2) NOT NULL,
  due_date DATE NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  status TINYINT DEFAULT 0,
  FOREIGN KEY (address_id) REFERENCES addresses(address_id) ON DELETE CASCADE
);

CREATE TABLE payment_slips (
  id INT AUTO_INCREMENT PRIMARY KEY,
  bill_id INT NOT NULL,
  image_path VARCHAR(255) NOT NULL,
  uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  status ENUM('pending','approved','rejected') DEFAULT 'pending',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (bill_id) REFERENCES bills(id) ON DELETE CASCADE
);

CREATE TABLE waste_pricing (
  id INT AUTO_INCREMENT PRIMARY KEY,
  type ENUM('general','hazardous','recyclable') NOT NULL UNIQUE,
  price_per_kg DECIMAL(10,2) NOT NULL,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  admin_verify INT
);

CREATE TABLE waste_records (
  id INT AUTO_INCREMENT PRIMARY KEY,
  address_id INT NOT NULL,
  waste_type ENUM('general','hazardous','recyclable') NOT NULL,
  weight_kg DECIMAL(10,2) NOT NULL,
  recorded_date DATE DEFAULT CURDATE(),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (address_id) REFERENCES addresses(address_id) ON DELETE CASCADE
);

‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•"‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà" ‡πÉ‡∏ô table address
ALTER TABLE addresses
ADD COLUMN village_no VARCHAR(20) NOT NULL AFTER house_no;

ALTER TABLE addresses
ADD COLUMN address_type ENUM('household', 'establishment') NOT NULL;

‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏≠‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏≤‡∏•‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡∏•‡∏á‡∏≠‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÉ‡∏´‡∏°‡πà
CREATE TABLE `waste_pricing` (
  `id` int(11) NOT NULL,
  `type` enum('general','hazardous','recyclable') NOT NULL,
  `waste_type` enum('household','establishment') NOT NULL,
  `price_per_kg` decimal(10,2) NOT NULL,
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  `admin_verify` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

<<<<<<< HEAD
‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡∏¢‡∏∞‡∏≠‡∏¥‡∏ô‡∏ó‡∏£‡∏µ‡∏¢‡πå‡∏•‡∏á db

=======
‡πÄ‡∏û‡∏¥‡πà‡∏° type ‡∏Ç‡∏¢‡∏∞ organic ‡∏î‡πâ‡∏ß‡∏¢
ALTER TABLE waste_pricing 
MODIFY COLUMN type ENUM('general', 'hazardous', 'recyclable', 'organic') NOT NULL;

‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡∏¢‡∏∞‡∏≠‡∏¥‡∏ô‡∏ó‡∏£‡∏µ‡∏¢‡πå‡∏•‡∏á db
>>>>>>> 2015ff94d48852fd611183a4db92820722661155
ALTER TABLE waste_records 
MODIFY waste_type ENUM('general','hazardous','recyclable','organic') NOT NULL;

========

‡πÄ‡∏û‡∏¥‡πà‡∏° ‡πÉ‡∏ô bills 
ALTER TABLE bills ADD UNIQUE KEY uniq_addr_due (address_id, due_date);

‡∏™‡∏£‡πâ‡∏≤‡∏á .emv ‡πÉ‡∏ô smartpayt-client ‡πÅ‡∏•‡πâ‡∏ß‡∏ß‡∏≤‡∏á
VITE_API_BASE_URL=http://localhost:3000

